## 介绍
存储过程是事先经过编译并存储在数据库中的一段 SQL 语句的集合，调用存储过程可以简化应用开发
人员的很多工作，减少数据在数据库和应用服务器之间的传输，对于提高数据处理的效率是有好处的。
`存储过程思想上很简单，就是数据库 SQL 语言层面的代码封装与重用`。

## 特点
封装，复用 -----------------------> 可以把某一业务SQL封装在存储过程中，需要用到
的时候直接调用即可。
可以接收参数，也可以返回数据 --------> 再存储过程中，可以传递参数，也可以接收返回
值。
减少网络交互，效率提升 -------------> 如果涉及到多条SQL，每执行一次都是一次网络传
输。 而如果封装在存储过程中，我们只需要网络交互一次可能就可以了。

##  创建 
```sql
-- 存储过程基本语法
-- 创建
create procedure p1()
begin
    select count(*) from student;
end;
-- 调用
call p1();
-- 查看
select * from information_schema.ROUTINES where ROUTINE_SCHEMA = 'itcast';
show create procedure p1;
-- 删除
drop procedure if exists p1;
```
## 变量
系统变量是mysql服务器提供的,不是用户定义的,属于服务器层面,分为全局变量和会话变量

## while循环
while 循环是有条件的循环控制语句。满足条件后，再执行循环体中的SQL语句。具体语法为：
```sql
-- 先判定条件，如果条件为true，则执行逻辑，否则，不执行逻辑
WHILE  条件  DO
    SQL逻辑...    
END WHILE;
```


## repeat循环
repeat是有条件的循环控制语句, 当满足until声明的条件的时候，则退出循环 。具体语法为：
```sql
-- 先执行一次逻辑，然后判定UNTIL条件是否满足，如果满足，则退出。如果不满足，则继续下一次循环
REPEAT
    SQL逻辑...  
    UNTIL  条件
END REPEAT;
```
## loop循环

LOOP 实现简单的循环，如果不在SQL逻辑中增加退出循环的条件，可以用其来实现简单的死循环。LOOP可以配合一下两个语句使用：
* LEAVE ：配合循环使用，退出循环。
* ITERATE：必须用在循环中，作用是跳过当前循环剩下的语句，直接进入下一次循环。
```sql
[begin_label:]  LOOP
    SQL逻辑...  
END  LOOP  [end_label];
------------------------------------------------------
LEAVE  label;   -- 退出指定标记的循环体
ITERATE  label; -- 直接进入下一次循环
```



